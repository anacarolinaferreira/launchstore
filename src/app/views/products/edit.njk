{% extends "layout.njk"%}

{% block content %}

  <section class="container form">
    <form action="/products?_method=PUT" method="POST">
      <div class="header">
        <h3>Editar Produto = {{product.name}}</h3>
      </div>

      <div class="fields">
        {%include 'products/fields.njk'%}
        <input type="hidden" name="id" value={{product.id}}>
      </div>

      <button class="button edit" type="submit">Atualizar</button>
    </form>

    <form id='form-delete' action="/products?method=DELETE" method="post">
        <input type="hidden" name="id" value={{product.id}}>
    <button class="button delete" type="submit">Deletar</button>
    </form>

  </section>

  <script>
    const formDelete = document.querySelector('#form-delete')
    formDelete.addEventListener('submit', function(event){
      const confirmation = confirm('Deseja realmente deletar esse registro?')
      if(!confirmation){
        event.preventDefault()
      }
    })
  </script>

{%endblock content %}